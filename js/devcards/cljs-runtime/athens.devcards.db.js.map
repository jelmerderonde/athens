{"version":3,"sources":["athens/devcards/db.cljs"],"mappings":"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","names":["athens.devcards.db/load-real-db!","conn","c__39615__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__39616__auto__","switch__39592__auto__","state_47030","state_val_47031","statearr-47033","inst_46993","inst_46994","inst_46995","cljs.core/PersistentHashMap","inst_46996","cljs.core.async.impl.ioc-helpers/take!","statearr-47035","inst_47026","statearr-47038","statearr-47039","inst_46998","inst_47003","inst_47004","inst_47005","inst_47006","cljs.core/PROTOCOL_SENTINEL","inst_47007","statearr-47041","statearr-47042","inst_47021","inst_47023","inst_47024","statearr-47044","inst_47000","inst_47001","cljs.core/not","statearr-47045","statearr-47046","statearr-47047","inst_47019","inst_47020","cljs.core.get.cljs$core$IFn$_invoke$arity$2","statearr-47049","statearr-47051","statearr-47052","inst_47016","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","statearr-47053","inst_47014","statearr-47054","statearr-47055","inst_47028","cljs.core.async.impl.ioc-helpers/return-chan","statearr-47056","inst_47011","statearr-47057","statearr-47062","state-machine__39593__auto__","ret-value__39594__auto__","result__39595__auto__","cljs.core/keyword-identical?","e47063","js/Object","ex__39596__auto__","statearr-47065","cljs.core.async.impl.ioc-helpers/process-exception","state__39617__auto__","statearr-47066","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs_http.client.get.cljs$core$IFn$_invoke$arity$variadic","athens.db/athens-url","posh.reagent/transact!","athens.db/str-to-db-tx","js/alert","athens.devcards.db/load-real-db-button","pressed?","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","handler","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","cljs.core/deref","devcards.core/register-card","devcards.core/card-base","js/athens","js/athens.devcards","js/athens.devcards.db","js/athens.devcards.db.t_athens$devcards$db47067","athens.devcards.db/t_athens$devcards$db47067","_47069","meta47068","this__46778__auto__","devcard-opts__46779__auto__","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","v__46808__auto__","cljs.core/fn?","data-atom__46809__auto__","owner__46810__auto__","reagent.core/as-element","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","devcards.core/assert-options-map","this__4428__auto__","writer__4429__auto__","opt__4430__auto__","cljs.core/-write","athens.devcards.db/->t_athens$devcards$db47067","athens.db/dsdb","athens.devcards.db/new-conn","datascript.core.create_conn.cljs$core$IFn$_invoke$arity$1","athens.db/schema","athens.devcards.db/posh-conn!","posh.reagent/posh!"],"sourcesContent":["(ns athens.devcards.db\n  (:require\n    [athens.db :as db]\n    [cljs-http.client :as http]\n    [cljs.core.async :refer [go <!]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [datascript.core :as d]\n    [devcards.core :refer [defcard defcard-rg]]\n    [posh.reagent :refer [posh! transact!]]\n    [reagent.core :as r]))\n\n\n(defn load-real-db!\n  [conn]\n  (go\n    (let [res (<! (http/get db/athens-url {:with-credentials? false}))\n          {:keys [success body]} res]\n      (if success\n        (transact! conn (db/str-to-db-tx body))\n        (js/alert \"Failed to retrieve data from GitHub\")))))\n\n\n(defn load-real-db-button\n  [conn]\n  (let [pressed? (r/atom false)\n        handler (fn []\n                  (swap! pressed? not)\n                  (load-real-db! conn))]\n    (fn []\n      [:button {:disabled @pressed? :on-click handler} \"Load Real Data\"])))\n\n\n(defcard-rg Load-Real-DB\n  \"Downloads the ego db. Takes a few seconds.\"\n  [load-real-db-button db/dsdb])\n\n\n(defcard athens-dsdb\n  \"The main Athens dsdb:\"\n  db/dsdb)\n\n\n(defn new-conn\n  []\n  (d/create-conn db/schema))\n\n\n(defn posh-conn!\n  [conn]\n  (posh! conn))\n\n"]}